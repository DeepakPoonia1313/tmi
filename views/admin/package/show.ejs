<%- include('../layout/header') %>
    <%- include('../layout/sidebar') %>

        <div class="container mt-4">
            <!-- Breadcrumb -->
            <nav aria-label="breadcrumb" class="mb-4">
                <ol class="breadcrumb p-2 bg-light rounded-3" style="--bs-breadcrumb-divider: '›';">
                    <li class="breadcrumb-item">
                        <a href="/admin/dashboard" class="text-decoration-none text-primary">Dashboard</a>
                    </li>
                    <li class="breadcrumb-item">
                        <a href="/admin/package/package" class="text-decoration-none text-primary">Packages</a>
                    </li>
                    <li class="breadcrumb-item active" aria-current="page">Package Details</li>
                </ol>
            </nav>

            <!-- Package Details Card -->
            <div class="card border-0 shadow-sm">
                <div class="card-header bg-white border-bottom py-3">
                    <div class="d-flex justify-content-between align-items-center">
                        <h5 class="mb-0 fw-semibold">Package Details</h5>
                        <div>
                            <a href="/admin/package/renderEditPage/<%= package.id %>"
                                class="btn btn-primary btn-sm me-2">
                                <i class="fas fa-edit me-1"></i> Edit
                            </a>
                            <a href="/admin/package/package" class="btn btn-outline-secondary btn-sm">
                                <i class="fas fa-arrow-left me-1"></i> Back
                            </a>
                        </div>
                    </div>
                </div>

                <div class="card-body p-4">
                    <!-- Package Header -->
                    <div class="row mb-4">
                        <!-- <div class="col-md-8">
                            <h2 class="fw-bold">
                                <%= package.title %>
                            </h2>
                            <div class="d-flex align-items-center mb-2">
                                <span class="badge bg-primary me-2">
                                    <%= package.price ? '₹' + package.price : 'Price on request' %>
                                </span>
                                <% if (package.featured) { %>
                                    <span class="badge bg-warning text-dark me-2">Featured</span>
                                    <% } %>
                                        <% if (package.fixed_departure) { %>
                                            <span class="badge bg-info text-dark me-2">Fixed Departure</span>
                                            <% } %>
                                                <% if (package.status) { %>
                                                    <span class="badge bg-success">Active</span>
                                                    <% } else { %>
                                                        <span class="badge bg-secondary">Inactive</span>
                                                        <% } %>
                            </div>
                            <p class="text-muted">
                                <%= package.short_description %>
                            </p>
                        </div>
                        
                        <div class="col-md-4 text-md-end">
                            <div class="d-flex flex-column">
                                <span class="text-muted small">Slug:</span>
                                <code><%= package.slug %></code>
                            </div>
                        </div>

                        <div class="col-md-12 mt-3">
                            <div class="d-flex flex-wrap gap-2">
                                <% if (package.duration_days) { %>
                                    <span class="badge bg-secondary">
                                        <i class="fas fa-calendar-day me-1"></i>
                                        <%= package.duration_days %> Days
                                    </span>
                                    <% } %>
                                        <% if (package.duration_nights) { %>
                                            <span class="badge bg-secondary">
                                                <i class="fas fa-moon me-1"></i>
                                                <%= package.duration_nights %> Nights
                                            </span>
                                            <% } %>
                            </div>
                        </div> -->

                        <div class="col-md-8">
                            <div class="d-flex flex-column h-100 fs-5">
                                <!-- Title -->
                                <h2 class="fw-bold mb-3">
                                    <%= package.title %>
                                </h2>

                                <!-- Price and status badges -->
                                <!-- <div class="d-flex flex-wrap align-items-center gap-2 mb-3">
                                    <span class="badge bg-primary py-2">
                                        <%= package.price ? '₹' + package.price : 'Price on request' %>
                                    </span>

                                    <% if (package.featured) { %>
                                        <span class="badge bg-warning text-dark py-2">Featured</span>
                                        <% } %>

                                            <% if (package.fixed_departure) { %>
                                                <span class="badge bg-info text-dark py-2">Fixed Departure</span>
                                                <% } %>

                                                    <% if (package.status) { %>
                                                        <span class="badge bg-success py-2">Active</span>
                                                        <% } else { %>
                                                            <span class="badge bg-secondary py-2">Inactive</span>
                                                            <% } %>
                                </div> -->
                                <div class="d-flex flex-wrap align-items-center gap-2 mb-3">
                                    <span class="badge border py-2 bg-white text-dark">
                                        <%= package.price ? '₹' + package.price : 'Price on request' %>
                                    </span>

                                    <% if (package.featured) { %>
                                        <span class="badge border py-2 bg-white text-dark">Featured</span>
                                        <% } %>

                                            <% if (package.fixed_departure) { %>
                                                <span class="badge border py-2 bg-white text-dark">Fixed
                                                    Departure</span>
                                                <% } %>

                                                    <% if (package.status) { %>
                                                        <span class="badge border py-2 bg-white text-dark">Active</span>
                                                        <% } else { %>
                                                            <span
                                                                class="badge border py-2 bg-white text-dark">Inactive</span>
                                                            <% } %>
                                </div>

                                <!-- Short description -->
                                <p class="text-muted mb-3">
                                    <%= package.short_description %>
                                </p>

                                <!-- Duration info -->
                                <div class="d-flex flex-wrap gap-2 mt-auto mb-5">
                                    <% if (package.best_time) { %>
                                        <span class="badge bg-light text-dark border py-2">
                                            <i class="fas fa-calendar-alt me-1"></i>
                                            Best Time: <%= package.best_time %>
                                        </span>
                                        <% } %>
                                            <% if (package.duration_days) { %>
                                                <span class="badge bg-light text-dark border py-2">
                                                    <i class="fas fa-calendar-day me-1"></i>
                                                    <%= package.duration_days %> Days
                                                </span>
                                                <% } %>

                                                    <% if (package.duration_nights) { %>
                                                        <span class="badge bg-light text-dark border py-2">
                                                            <i class="fas fa-moon me-1"></i>
                                                            <%= package.duration_nights %> Nights
                                                        </span>
                                                        <% } %>
                                </div>
                            </div>
                        </div>

                        <!-- Slug info -->
                        <div class="col-md-4">
                            <div class="d-flex flex-column fs-5 h-100 justify-content-start align-items-md-end">
                                <div class="bg-light p-3 rounded text-end">
                                    <span class="text-muted small d-block">Slug:</span>
                                    <code class="d-block text-break"><%= package.slug %></code>
                                </div>
                            </div>
                        </div>

                        <!-- Featured Image -->
                        <% if (package.image) { %>
                            <div class="mb-4">
                                <h5 class="fw-medium mb-3">Featured Image</h5>
                                <img src="<%= package.image %>" alt="Featured Image" class="img-fluid rounded"
                                    style="max-height: 400px;">
                            </div>
                            <% } %>

                                <!-- Additional Images -->
                                <% if (packageImages && packageImages.length> 0) { %>
                                    <div class="mb-4">
                                        <h5 class="fw-medium mb-3">Gallery Images</h5>
                                        <div class="row g-3">
                                            <% packageImages.forEach(image=> { %>
                                                <div class="col-6 col-md-4 col-lg-3">
                                                    <img src="<%= image.image_url %>" alt="Gallery Image"
                                                        class="img-fluid rounded"
                                                        style="height: 180px; width: 100%; object-fit: cover;">
                                                </div>
                                                <% }); %>
                                        </div>
                                    </div>
                                    <% } %>

                                        <!-- Themes -->
                                        <% if (associatedThemes && associatedThemes.length> 0) { %>
                                            <div class="mb-4">
                                                <h5 class="fw-medium mb-3">Themes</h5>
                                                <div class="d-flex flex-wrap gap-2">
                                                    <% associatedThemes.forEach(theme=> { %>
                                                        <span class="badge bg-primary rounded-pill px-3 py-2">
                                                            <%= theme.name %>
                                                        </span>
                                                        <% }); %>
                                                </div>
                                            </div>
                                            <% } %>

                                                <!-- Inclusions & Exclusions -->
                                                <div class="row mb-4">
                                                    <div class="col-md-6">
                                                        <div class="card h-100 border-0 shadow-sm">
                                                            <div class="card-header bg-light">
                                                                <h5 class="fw-medium mb-0">Inclusions</h5>
                                                            </div>
                                                            <div class="card-body">
                                                                <% if (package.inclusions) { %>
                                                                    <ul class="mb-0">
                                                                        <% package.inclusions.split(',').forEach(item=>
                                                                            { %>
                                                                            <li>
                                                                                <%= item.trim() %>
                                                                            </li>
                                                                            <% }); %>
                                                                    </ul>
                                                                    <% } else { %>
                                                                        <p class="text-muted mb-0">No inclusions
                                                                            specified
                                                                        </p>
                                                                        <% } %>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="card h-100 border-0 shadow-sm">
                                                            <div class="card-header bg-light">
                                                                <h5 class="fw-medium mb-0">Exclusions</h5>
                                                            </div>
                                                            <div class="card-body">
                                                                <% if (package.exclusions) { %>
                                                                    <ul class="mb-0">
                                                                        <% package.exclusions.split(',').forEach(item=>
                                                                            { %>
                                                                            <li>
                                                                                <%= item.trim() %>
                                                                            </li>
                                                                            <% }); %>
                                                                    </ul>
                                                                    <% } else { %>
                                                                        <p class="text-muted mb-0">No exclusions
                                                                            specified
                                                                        </p>
                                                                        <% } %>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- Package Content -->
                                                <div class="mb-4">
                                                    <h5 class="fw-medium mb-3">Package Details</h5>
                                                    <div class="border rounded p-3 bg-light">
                                                        <%- package.content %>
                                                    </div>
                                                </div>

                                                <!-- SEO Information -->
                                                <div class="accordion" id="seoAccordion">
                                                    <div class="accordion-item border-0 shadow-sm">
                                                        <h2 class="accordion-header">
                                                            <button class="accordion-button bg-light py-2 collapsed"
                                                                type="button" data-bs-toggle="collapse"
                                                                data-bs-target="#seoCollapse">
                                                                <span class="fw-medium">SEO Information</span>
                                                            </button>
                                                        </h2>
                                                        <div id="seoCollapse" class="accordion-collapse collapse"
                                                            data-bs-parent="#seoAccordion">
                                                            <div class="accordion-body pt-3">
                                                                <div class="row g-3">
                                                                    <div class="col-md-6">
                                                                        <div class="mb-3">
                                                                            <label class="form-label fw-medium">Meta
                                                                                Title</label>
                                                                            <p class="form-control-plaintext">
                                                                                <%= package.meta_title
                                                                                    || 'Not specified' %>
                                                                            </p>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-6">
                                                                        <div class="mb-3">
                                                                            <label
                                                                                class="form-label fw-medium">Canonical
                                                                                URL</label>
                                                                            <p class="form-control-plaintext">
                                                                                <%= package.canonical_url
                                                                                    || 'Not specified' %>
                                                                            </p>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-12">
                                                                        <div class="mb-0">
                                                                            <label class="form-label fw-medium">Meta
                                                                                Description</label>
                                                                            <p class="form-control-plaintext">
                                                                                <%= package.meta_description
                                                                                    || 'Not specified' %>
                                                                            </p>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                    </div>

                    <div class="card-footer bg-white border-top py-3">
                        <div class="d-flex justify-content-between align-items-center">
                            <small class="text-muted">
                                Created: <%= new Date(package.created_at).toLocaleString() %>
                                    <% if (package.updated_at) { %>
                                        | Last Updated: <%= new Date(package.updated_at).toLocaleString() %>
                                            <% } %>
                            </small>
                            <div>
                                <a href="/admin/package/renderEditPage/<%= package.id %>"
                                    class="btn btn-primary btn-sm me-2">
                                    <i class="fas fa-edit me-1"></i> Edit
                                </a>
                                <a href="/admin/package/package" class="btn btn-outline-secondary btn-sm">
                                    <i class="fas fa-arrow-left me-1"></i> Back to List
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Custom Styling -->
            <style>
                .card-header {
                    border-bottom: none;
                }

                .form-control-plaintext {
                    min-height: 38px;
                    padding: 0.375rem 0.75rem;
                    background-color: #f8f9fa;
                    border-radius: 0.375rem;
                }
            </style>

            <%- include('../layout/footer') %>